<!doctype html>
<html lang="ca">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="exe_highlighter.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>3. Herència </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning  - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="exe_highlighter.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-9"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Omet navegació</a></p>
<section id="emptyHeader"></section>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">4. PHP - Classes i objectes</a></li>
   <li><a href="1_introducci.html" class="no-ch">1. Introducció</a></li>
   <li><a href="2_caracterstiques_bsiques_de_la_utilitzaci_dobjectes_en_php.html" class="daddy">2. Característiques bàsiques de la utilització d'objectes en PHP</a>
   <ul class="other-section">
      <li><a href="1_definici_de_classes.html" class="daddy">1. Definició de classes</a>
      <ul class="other-section">
         <li><a href="constructor_i_destructor.html" class="no-ch">Constructor i destructor</a></li>
      </ul>
      </li>
      <li><a href="2_utilitzaci_dobjectes.html" class="no-ch">2. Utilització d'objectes</a></li>
   </ul>
   </li>
   <li id="active"><a href="3_herncia.html" class="active no-ch">3. Herència</a></li>
   <li><a href="4_interfcies.html" class="no-ch">4. Interfícies</a></li>
   <li><a href="4_traits.html" class="no-ch">4. Traits</a></li>
   <li><a href="5_treball_amb_objectes.html" class="no-ch">5. Treball amb objectes</a></li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="2_utilitzaci_dobjectes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="4_interfcies.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">3. Herència</h1></header>
<article class="iDevice_wrapper FreeTextIdevice" id="id6">
<div class="iDevice emphasis0">
<div id="ta6_85" class="block iDevice_content">
<h2>Conceptes bàsics</h2>
<p>L'herència és un mecanisme de la POO que ens permet definir noves classes sobre la base d'una altra ja existent. Les noves classes que hereten també es coneixen amb el nom de subclasses. La classe de la qual hereten es diu classe base o superclasse.</p>
<p>Per exemple, en la nostra tenda web anem a tenir productes de diferents tipus. En principi hem creat per a manejar-los una classe anomenada Producte, amb alguns atributs i un mètode que genera una eixida personalitzada en format HTML del codi.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class Producte {
    public $codi;
    public $nom;
    public $nom_curt;
    public $PVP;
    
    public function mostra() {
        print "&lt;p&gt;" . $this-&gt;codigo . "&lt;/p&gt;";
    }
}</code></pre>
</div>
</div>
<p>Aquesta classe és molt útil si l'única informació que tenim dels diferents productes és la que es mostra a dalt. Però, si vols personalitzar la informació que vas a tractar de cada tipus de producte (i emmagatzemar, per exemple per als televisors, les polzades que tenen o la seua tecnologia de fabricació), pots crear noves classes que hereten de <span style="font-family: andale mono, monospace;">Producte</span>. Per exemple, <span style="font-family: andale mono, monospace;">TV</span>, <span style="font-family: andale mono, monospace;">Ordinador</span>, <span style="font-family: andale mono, monospace;">Mòbil</span>.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class TV extends Producte {
    public $polzades;
    public $tecnologia;
}
</code></pre>
</div>
</div>
<h2>La paraula reservada <code>extends</code></h2>
<p>Com pots veure, per a definir una classe que herete d'una altra, simplement has de utilitzar la paraula <span style="font-family: andale mono, monospace;">extends</span> indicant la superclasse. Els nous objectes que s'instancien a partir de la subclasse són també objectes de la classe base; es pot comprovar utilitzant l'operador <span style="font-family: andale mono, monospace;">instanceof</span>.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>$t = new TV();
if ($t instanceof Producte) {
    // Aquest codi s'executa doncs la condició és certa
    …
}</code></pre>
</div>
</div>
<p>La nova classe hereta tots els atributs i mètodes públics de la classe base, però no els privats. Si vols crear en la classe base un mètode no visible a l'exterior (com els privats) que s'herete a les subclasses, has d'utilitzar la paraula protected en lloc de private. A més, pots redefinir el comportament dels mètodes existents en la classe base, simplement creant en la subclasse un nou mètode amb el mateix nom.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class TV extends Producte { 
    public $polzades;
    public $tecnologia;
    
    public function mostra() {
        print "&lt;p&gt;" . $this-&gt;polzades . " polzades&lt;/p&gt;";
    }
}</code></pre>
</div>
</div>
<h2>La paraula reservada <code>final</code></h2>
<p>Existeix una forma d'evitar que les classes heretades puguen redefinir el comportament dels mètodes existents en la superclasse: utilitzar la paraula <span style="font-family: andale mono, monospace;">final</span>. Si en el nostre exemple haguérem fet:</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class Producte { 
    public $codi; 
    public $nom;
    public $nom_curt; 
    public $PVP;

    public final function mostra() {
        print "&lt;p&gt;" . $this-&gt;codi . "&lt;/p&gt;";
    }
}</code></pre>
</div>
</div>
<p>En aquest cas el mètode <span style="font-family: andale mono, monospace;">mostra</span> no podria redefinir-se en la classe TV.</p>
<p>Inclòs és pot declarar una classe utilitzant final. En aquest cas no podran crear-se classes heretades utilitzant-les com a base.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>final class Producte {
...
}</code></pre>
</div>
</div>
<h2>La paraula reservada <code>abstract</code></h2>
<p>Oposadament al modificador <span style="font-family: andale mono, monospace;">final</span>, existeix també <span style="font-family: andale mono, monospace;">abstract</span>. S'utilitza de la mateixa forma, tant amb mètodes com amb classes completes, però en lloc de prohibir l'herència, obliga a que s'herete. És a dir,<br />una classe amb el modificador abstract  no pot tenir objectes que la instancien, però sí podrà utilitzar-se de classe base i les seues subclasses sí podran utilitzar-se per a instanciar objectes.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>abstract class Producte {
...
}</code></pre>
</div>
</div>
<p>Un mètode en el qual s'indique abstract, ha de ser redefinit obligatòriament per les subclasses, i no podrà contenir codi.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class Producte {
    …
    abstract public function mostra();
}</code></pre>
</div>
</div>
<p>Anem a fer una petita modificació en la nostra classe Producte. Per a facilitar la creació de nous objectes, crearem un constructor al que se li passarà un array amb els valors dels atributs del nou producte.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class Producte {
    public $codige;
    public $nom;
    public $nom_curt;
    public $PVP;

    public function mostra() {
        print "&lt;p&gt;" . $this-&gt;codi . "&lt;/p&gt;";
    }
    public function __construct($row) {
        $this-&gt;codi = $row['codi'];
        $this-&gt;nom = $row['nom'];
        $this-&gt;nom_curt = $row['nom_curt'];
        $this-&gt;PVP = $row['PVP'];
    }
}</code></pre>
</div>
</div>
<p><strong>Què passa ara amb la classe TV, què hereta de Producte? Quan crees un nou objecte d'aqueixa classe, es cridarà al constructor de Producte? Pots crear un nou constructor específic perquè redefinisca el comportament de la classe base?</strong></p>
<p>Començant per aquesta última pregunta, òbviament pots definir un nou constructor per a les classes heretades que redefinisquen el comportament del que existeix en la classe base, tal com faries amb qualsevol altre mètode. I depenent de si programes o no el constructor en la classe heretada, es cridarà  o no automàticament al constructor de la classe base.</p>
<p>En PHP5+, si la classe heretada no té constructor propi, es cridarà automàticament al constructor de la classe base (si existeix). No obstant açò, si la classe heretada defineix el seu propi constructor, hauràs de ser tu el que realitze la crida al constructor de la classe base si ho consideres necessari, utilitzant per a açò la paraula <code>parent</code> i l'operador de resolució d'àmbit.</p>
<div class="highlighted-code language-php">
<div>
<pre><code>class TV extends Producte {
    public $polzades;
    public $tecnologia;

    public function mostra() {
        print "&lt;p&gt;" . $this-&gt;polzades . " polzades&lt;/p&gt;";
    }

    public function __construct($row) {
        parent::__construct($row);
        $this-&gt;polzades = $row['polzades'];
        $this-&gt;tecnologia = $row['tecnologia'];
    }
}</code></pre>
</div>
</div>
<p>Ja has vist amb amb anterioritat com s'utilitzava la paraula clau <code>self</code> per a tenir accés a la classe actual. La paraula parent és semblant. En utilitzar parent fas referència a la classe base de la actual, ta com apareix rere <code>extends</code>.</p>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Llicenciat sota la </span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Llicència Creative Commons Reconeixement CompartirIgual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="2_utilitzaci_dobjectes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="4_interfcies.html" class="next"><span>Següent<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>